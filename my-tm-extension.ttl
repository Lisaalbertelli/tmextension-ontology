@prefix : <http://example.org/tm#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix frac: <http://www.w3.org/ns/lemon/frac#> .
@prefix ontolex: <http://www.w3.org/ns/lemon/ontolex#> .
@prefix prov: <http://www.w3.org/ns/prov#> .

@base <http://example.org/tm#> .

#################################################################
# Ontology declaration
#################################################################

:TMExtensionOntology
    rdf:type owl:Ontology ;
    owl:imports
        <http://www.w3.org/ns/lemon/frac> ,
        <http://www.w3.org/ns/lemon/ontolex> ;
    dct:title "FrAC Topic Modeling Extension (draft)"@en ;
    dct:description """
Draft OWL vocabulary to represent Topic Modeling outputs
as FrAC observations over OntoLex Forms.
"""@en .

#################################################################
# Annotation properties
#################################################################

dct:title rdf:type owl:AnnotationProperty .
dct:description rdf:type owl:AnnotationProperty .

#################################################################
# Object properties
#################################################################

:document
    rdf:type owl:ObjectProperty ;
    rdfs:domain :DocumentTopicAssociation ;
    rdfs:range rdfs:Resource ;
    rdfs:label "document / segment"@en ;
    rdfs:comment "Links a Document–Topic association to a document or document segment."@en .

:term
    rdf:type owl:ObjectProperty ;
    rdfs:domain :TopicTermAssociation ;
    rdfs:label "term"@en ;
    rdfs:comment "Links a Topic–Term association to a term (typically an OntoLex Form)."@en .

:topic
    rdf:type owl:ObjectProperty ;
    rdfs:domain [
        rdf:type owl:Class ;
        owl:unionOf (
            :DocumentTopicAssociation
            :TopicTermAssociation
        )
    ] ;
    rdfs:range :Topic ;
    rdfs:label "topic"@en ;
    rdfs:comment """
Links an observation (document–topic or topic–term)
to the co-observed Topic, following the FrAC model.
"""@en .

:wasGeneratedByRun
    rdf:type owl:ObjectProperty ;
    rdfs:subPropertyOf prov:wasGeneratedBy ;
    rdfs:domain frac:Observation ;
    rdfs:range :TopicModelRun ;
    rdfs:label "was generated by run"@en ;
    rdfs:comment """
Convenience link to a TopicModelRun.
prov:wasGeneratedBy may also be used directly.
"""@en .

:speaker
    rdf:type owl:ObjectProperty ;
    rdfs:domain :Document ;
    rdfs:range owl:Thing ;
    rdfs:label "speaker"@en ;
    rdfs:comment """
Speaker or author of the document.
Typically identified using external authorities
(e.g. Wikidata, FOAF).
"""@en .

#################################################################
# Datatype properties
#################################################################

:termWeight
    rdf:type owl:DatatypeProperty ;
    rdfs:domain :TopicTermAssociation ;
    rdfs:range xsd:decimal ;
    rdfs:label "term weight"@en ;
    rdfs:comment """
Weight of a term within a topic
(e.g. c-TF-IDF, phi(w|z)).
"""@en .

:topicWeight
    rdf:type owl:DatatypeProperty ;
    rdfs:domain :DocumentTopicAssociation ;
    rdfs:range xsd:decimal ;
    rdfs:label "topic weight"@en ;
    rdfs:comment """
Weight of a topic for a document or segment
(e.g. theta(z|d), confidence, or hard assignment).
"""@en .

:year
    rdf:type owl:DatatypeProperty ;
    rdfs:domain :Document ;
    rdfs:range xsd:gYear ;
    rdfs:label "year"@en ;
    rdfs:comment "Year associated with the document."@en .

#################################################################
# Classes
#################################################################

:DocumentTopicAssociation
    rdf:type owl:Class ;
    rdfs:subClassOf frac:Observation ;
    rdfs:label "Document–Topic association"@en ;
    rdfs:comment """
Atomic observation linking a document or segment
to a Topic with an associated weight.
"""@en .

:TopicTermAssociation
    rdf:type owl:Class ;
    rdfs:subClassOf frac:Observation ;
    rdfs:label "Topic–Term association"@en ;
    rdfs:comment """
Atomic observation linking a Topic to a lexical Form
with a membership weight.
"""@en .

:Topic
    rdf:type owl:Class ;
    rdfs:subClassOf
        rdfs:Container ,
        frac:Observable ,
        frac:Observation ,
        [
            rdf:type owl:Restriction ;
            owl:onProperty rdfs:member ;
            owl:allValuesFrom ontolex:Form
        ] ;
    rdfs:label "Topic"@en ;
    rdfs:comment """
A Topic is an observed analytical result that groups
lexical forms (OntoLex Forms) and is itself observable
within the FrAC framework.
"""@en .

:TopicModelRun
    rdf:type owl:Class ;
    rdfs:subClassOf prov:Activity ;
    rdfs:label "Topic model run"@en ;
    rdfs:comment """
A concrete execution of a topic modeling algorithm
with specific parameters, corpus, and versions.
"""@en .

:Document
    rdf:type owl:Class ;
    rdfs:subClassOf rdfs:Resource ;
    rdfs:label "Document"@en ;
    rdfs:comment """
A textual document or document segment
used as input for topic modeling.
"""@en .

#################################################################
# External classes explicitly referenced
#################################################################

rdfs:Container rdf:type owl:Class .
frac:Observable rdf:type owl:Class .
frac:Observation rdf:type owl:Class .
prov:Activity rdf:type owl:Class .
